### ========== Переменные (можно менять) ==========
# Адрес бэкенда
@baseUrl = http://91.194.3.57:8080
# Тип тела запроса для JSON
@contentType = application/json
# Заглушка для Bearer-токена, если позже будет JWT
@token = your-bearer-token-if-needed

# Учётные данные совпадают с UserDetailsService в SecurityConfig (user / password)
@username = user
@password = password
# HTTP Basic: заголовок "Authorization: Basic <base64(user:password)>".
# dXNlcjpwYXNzd29yZA== — это base64("user:password"). Подставляем в запросы к /api/tasks, чтобы не получать 403.
@basicAuth = Basic dXNlcjpwYXNzd29yZA==

### GET — пример с заголовками (эндпоинт /api/example)
GET {{baseUrl}}/api/example
Content-Type: {{contentType}}
Authorization: Bearer {{token}}
X-Request-Id: req-001
Accept: application/json

###

### POST — пример с телом запроса
POST {{baseUrl}}/api/example
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "name": "test",
  "value": 42
}

###

### POST — вход в систему (AuthController.login).
# В ответ приходит Set-Cookie: JSESSIONID=... — сохранится в REST-клиенте, следующие запросы в той же сессии будут с кукой.
# Без этого запроса (или без Basic Auth) запросы к /api/tasks дают 403.
POST {{baseUrl}}/api/auth/login
Content-Type: {{contentType}}

{
  "username": "user",
  "password": "password"
}

###

### GET — "кто залогинен?" (AuthController.me). Можно вызывать без авторизации — вернёт authenticated: true/false.
# Если перед этим вызвать /api/auth/login в том же клиенте, кука подставится и вернётся username.
GET {{baseUrl}}/api/auth/me
Content-Type: {{contentType}}

###

### GET — список всех задач. Доступ только для авторизованных (SecurityConfig: /api/** .authenticated()).
# Authorization: {{basicAuth}} — передаём логин/пароль в виде Basic, чтобы не получать 403.
GET {{baseUrl}}/api/tasks
Content-Type: {{contentType}}
Authorization: {{basicAuth}}

###

### POST — создать задачу (первый пример тела)
POST {{baseUrl}}/api/tasks
Content-Type: {{contentType}}
Authorization: {{basicAuth}}

{
  "title": "Изучить магию",
  "description": "Пройти магию",
  "dueDate": "2028-12-31",
  "completed": false
}

###

### POST — создать задачу (второй пример тела)
POST {{baseUrl}}/api/tasks
Content-Type: {{contentType}}
Authorization: {{basicAuth}}

{
  "title": "Изучить Spring Boot 2",
  "description": "Пройти курс и сделать пет-проект 2",
  "dueDate": "2026-02-08",
  "completed": true
}

###

### PUT — обновить задачу по id (в т.ч. флаг completed). Тоже нужен Authorization.
PUT {{baseUrl}}/api/tasks/1
Content-Type: {{contentType}}
Authorization: {{basicAuth}}

{
  "title": "Изучить Spring Boot",
  "description": "Пройти курс",
  "dueDate": "2025-12-31",
  "completed": true
}

###

### DELETE — удалить задачу по id. Требует авторизации (Basic или сессия).
DELETE {{baseUrl}}/api/tasks/1
Content-Type: {{contentType}}
Authorization: {{basicAuth}}

###

### ========== Файловый менеджер (/api/files) ==========
### GET — список загруженных файлов (имя + размер в байтах)
GET {{baseUrl}}/api/files
Authorization: {{basicAuth}}

###

### POST — загрузить файл (multipart). В REST-клиенте: заменить путь к файлу на свой.
# IntelliJ: file@/absolute/path/to/file.txt  или  file@relative/path
# VS Code REST Client: см. документацию по multipart
# POST {{baseUrl}}/api/files
# Authorization: {{basicAuth}}
# Content-Type: multipart/form-data; boundary=bound
#
# --bound
# Content-Disposition: form-data; name="file"; filename="test.txt"
#
# < ./test.txt
# --bound--

###

### GET — скачать файл по имени (имя из списка GET /api/files)
# GET {{baseUrl}}/api/files/имя_файла.txt
# Authorization: {{basicAuth}}

###

### DELETE — удалить файл по имени
# DELETE {{baseUrl}}/api/files/имя_файла.txt
# Authorization: {{basicAuth}}

###

### Сертификат: для хоста сертификат задаётся в настройках
### Файл .vscode/settings.json → rest-client.certificates
### После настройки просто отправляй запрос на https://твой-хост — сертификат подставится автоматически
# GET https://api.secure.example.com/endpoint
# Content-Type: application/json
###
